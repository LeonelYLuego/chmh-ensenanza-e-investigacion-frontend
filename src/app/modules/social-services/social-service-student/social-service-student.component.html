<mat-card class="main-card">
  <mat-card-title class="main-card-title">
    <span class="main-card-title-text">Alumno de Servicio Social</span>
  </mat-card-title>
  <mat-divider></mat-divider>
  <div style="margin-bottom: 20px"></div>
  <div *ngIf="socialService">
    <app-student-info [id]="socialService.student"></app-student-info>
    <div style="margin: 20px"></div>
    <div id="social-service-info">
      <h2>Datos del Servicio Social</h2>
      <mat-form-field class="large-input input">
        <mat-label>Hospital</mat-label>
        <mat-select [formControl]="socialServiceFormControl.controls.hospital">
          <mat-option *ngFor="let hospital of hospitals" [value]="hospital._id">
            {{ hospital.name }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="socialServiceFormControl.controls.hospital.invalid"
          >Hospital <strong>Inválido</strong></mat-error
        >
      </mat-form-field>
      <mat-form-field class="short-input input">
        <mat-label>Periodo</mat-label>
        <mat-select [formControl]="socialServiceFormControl.controls.period">
          <mat-option
            *ngFor="let period of singlePeriods"
            [value]="period.value"
            >{{ period.name }}</mat-option
          >
        </mat-select>
        <mat-error *ngIf="socialServiceFormControl.controls.period.invalid"
          >Periodo <strong>Inválido</strong></mat-error
        >
      </mat-form-field>
      <mat-form-field class="short-input input">
        <mat-label>Año</mat-label>
        <input
          matInput
          [formControl]="socialServiceFormControl.controls.year"
        />
        <mat-error>Año <strong>Inválido</strong></mat-error>
      </mat-form-field>
      <button mat-raised-button color="accent" (click)="updateSocialService()">
        Editar Servicio Social
      </button>
      <span style="margin-left: 10px"></span>
      <button mat-raised-button color="warn" (click)="deleteSocialService()">
        Eliminar Servicio Social
      </button>
    </div>
    <div id="social-service-documents">
      <h2>Documentos</h2>
      <h3>
        Oficio de Presentación
        <button
          *ngIf="!socialService.presentationOfficeDocument"
          (click)="presentationOfficeUploader.click()"
          mat-raised-button
          color="primary"
          class="document-button"
        >
          Agregar Archivo
        </button>
        <button
          *ngIf="socialService.presentationOfficeDocument"
          (click)="presentationOfficeUploader.click()"
          mat-raised-button
          color="accent"
          class="document-button"
        >
          Editar Archivo
        </button>
        <button
          *ngIf="socialService.presentationOfficeDocument"
          (click)="deleteFile('presentationOfficeDocument')"
          mat-raised-button
          color="warn"
          class="document-button"
        >
          Eliminar Archivo
        </button>
      </h3>
      <input
        hidden
        accept=".pdf"
        type="file"
        #presentationOfficeUploader
        (change)="updateFile($event, 'presentationOfficeDocument')"
      />
      <div *ngIf="socialService.presentationOfficeDocument">
        <iframe
          *ngIf="presentationOfficeDocument"
          [src]="presentationOfficeDocument"
          width="100%"
          height="600"
        ></iframe>
      </div>
      <br />
      <h3>
        Reporte
        <button
          *ngIf="!socialService.reportDocument"
          (click)="reportUploader.click()"
          mat-raised-button
          color="primary"
          class="document-button"
        >
          Agregar Archivo
        </button>
        <button
          *ngIf="socialService.reportDocument"
          (click)="reportUploader.click()"
          mat-raised-button
          color="accent"
          class="document-button"
        >
          Editar Archivo
        </button>
        <button
          *ngIf="socialService.reportDocument"
          (click)="deleteFile('reportDocument')"
          mat-raised-button
          color="warn"
          class="document-button"
        >
          Eliminar Archivo
        </button>
      </h3>
      <input
        hidden
        accept=".pdf"
        type="file"
        #reportUploader
        (change)="updateFile($event, 'reportDocument')"
      />
      <div *ngIf="socialService.reportDocument">
        <iframe
          *ngIf="reportDocument"
          [src]="reportDocument"
          width="100%"
          height="600"
        ></iframe>
      </div>
      <br />
      <h3>
        Constancia
        <button
          *ngIf="!socialService.constancyDocument"
          (click)="constancyUploader.click()"
          mat-raised-button
          color="primary"
          class="document-button"
        >
          Agregar Archivo
        </button>
        <button
          *ngIf="socialService.constancyDocument"
          (click)="constancyUploader.click()"
          mat-raised-button
          color="accent"
          class="document-button"
        >
          Editar Archivo
        </button>
        <button
          *ngIf="socialService.constancyDocument"
          (click)="deleteFile('constancyDocument')"
          mat-raised-button
          color="warn"
          class="document-button"
        >
          Eliminar Archivo
        </button>
      </h3>
      <input
        hidden
        accept=".pdf"
        type="file"
        #constancyUploader
        (change)="updateFile($event, 'constancyDocument')"
      />
      <div *ngIf="socialService.constancyDocument">
        <iframe
          *ngIf="constancyDocument"
          [src]="constancyDocument"
          width="100%"
          height="600"
        ></iframe>
      </div>
    </div>
  </div>
  <mat-card-actions align="end">
    <button mat-raised-button color="basic" routerLink="..">Cancelar</button>
  </mat-card-actions>
  <mat-card-footer *ngIf="loading">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </mat-card-footer>
</mat-card>
